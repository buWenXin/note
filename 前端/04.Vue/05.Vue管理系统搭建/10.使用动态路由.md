# 导航菜单和动态路由

后端返回的数据结构：

```json
[
  {
    "id": 23,
    "menuName": "系统管理",
    "type": 0,//tupe: 0目录 1页面
    "parent": 0,
    "path": "system",//路由路径
    "component": "",//组件的地址
    "icon": "#",
    "children": [//这个目录的子页面或子目录
      {
        "id": 24,
        "menuName": "用户管理",
        "type": 1,
        "parent": 23,
        "path": "user",
        "component": "system/User/User.vue",
        "icon": "#",
        "children": []
      },
      {
        "id": 25,
        "menuName": "角色管理",
        "type": 1,
        "parent": 23,
        "path": "role",
        "component": "system/Role/Role.vue",
        "icon": "#",
        "children": []
      },
      {
        "id": 26,
        "menuName": "菜单管理",
        "type": 1,
        "parent": 23,
        "path": "menu",
        "component": "system/Menu/Menu.vue",
        "icon": "#",
        "children": []
      }
    ]
  }
]
```





思路：

1. 从后端获取路由菜单的数据，将数据存储到Pinia中。
2. 导航菜单渲染：
   1. 在菜单页面，从`store`中获取存储的菜单数据，利用递归组件，去渲染导航菜单。
   2. 通过`children`的长度来进行递归的控制条件。
   3. 在返回的数据中有个`type`属性，根据`type`来区分渲染目录和页面。
   4. 给页面的导航菜单添加点击事件，当点击的时候进行路由跳转。
3. 动态注册路由：
   1. 从`store`中获取菜单数据，进行递归注册路由。
   2. 根据数据`type`属性进行判断，只有是页面才注册路由，目录则不用管
   3. 使用Vue-router提供的`router.addRoute()`api注册路由：
   4. 注册路由需要获取到组件，使用`viet`提供的`Glob` 导入，Vite 支持使用特殊的 `import.meta.glob` 函数从文件系统导入多个模块：这只是一个 Vite 独有的功能而不是一个 Web 或 ES 标准
   5. 获取到组件后，进行路由注册。









问题1：菜单的icon问题



问题2：页面刷新后，出现空白的问题。



问题3：页面刷新后，菜单定位到原来的位置



问题4：路由拼接的问题



问题5：动态路由跳转的问题

















## element push 动态使用icon

使用`<el-icon>`的样式

```html
<el-icon>
   <component is="bell-filled"></component>
</el-icon>
```

自定义样式

```html
<component style=‘’ is="bell-filled"></component>
```





