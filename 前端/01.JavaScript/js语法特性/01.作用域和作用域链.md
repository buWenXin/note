## 作用域和作用域链

> 作用域是一种规则，规定了变量的作用范围。
>

**作用域有三种：**

- 全局作用域：
  - 在全局中声明的变量（即在window对象中）,在代码中的任何地方都能访问，其生命周期伴随着页面的生命周期。只要页面关闭，才会被销毁
- 函数作用域：
  - 在函数内部声明的变量或函数，只能在函数内部去访问或者使用，并且在函数执行完成后就会销毁。（如果存在闭包，则不会销毁，因为还有引用）
- 块级作用域：
  - ES6中新增的，使用 `let` 和`const`在{}内声明的变量就是块级作用域：

## 词法作用域：

​	词法作用域就是指作用域是由代码中函数声明的位置来决定的，所以词法作用域是静态的作用域，在编写代码的时候就已经确定了，不会再变动。

​	根据代码的结构关系来确定作用域。词法作用域是一种静态的词法结构，[Java](http://c.biancheng.net/java/)Script 解析器主要根据词法结构确定每个变量的可见性和有效区域。

例子：

```ts
let name: string = "cat";

function getName() {
   let name: string = "tom";

   return function get() {
      console.log(name);
   }
}

const get = getName();
get()
```

​	上面的代码中，函数的内部返回了一个函数，并且返回的函数中使用到了外部函数中的变量name，那么我们获取到这个函数再去调用的时候，获取到的依然是函数中的`name`属性。

​	**由此可以确定，作用域是静态的，是由函数声明的位置来决定的，不会随着函数的调用发生变化。**

上面的例子中还产生了闭包。

## 作用域链:

​	作用域链是查找变量的链条，用来确定作用域之间嵌套的关系，指导js如何去查找变量，作用域链一样是静态的，在写代码的时候就已经确定了，不会变化。

​	作用域链是一条向上查找的链条，如果一个变量在自身作用域中没有找到，则会沿着作用域链向上查找。作用域链的终点的全局作用域，如果在全局的作用域中还是没有找到，则返回undefined

```js
function getName() {
   return function get() {
      console.log(name);
   }
}

const get = getName();
get()//输出 undefined
```

​	上面的例子，我们去访问一个变量，首先会在自身的作用域中查找，没有找到，如何就会沿着作用域链一路向上查找，最后到终点全局作用域，还是没有找到，则返回undefined



## 总结

- *作用域是一种规则*，规定了变量的作用范围，js中的作用域是静态的，是根据代码的结构关系来确定作用域
- *作用域链用来查找变量的，作用域链描述的是作用域的嵌套关系*，js的解析器，会根据作用域链去查找变量。
- 作用域的规则是：里面的可以访问外面的变量，但是外面不能访问里面的变量。可以认为作用域是一种向上查找的规则。