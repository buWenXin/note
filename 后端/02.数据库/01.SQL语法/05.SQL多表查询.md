# SQL多表查询

### 1.多表关系模型

- 一对一模型

  > 一对一关系是指，一个表中的数据，对应另一个表中的一个数据，也是唯一一条数据。
  >
  > 例如：订单表和用户表，一个订单只有一个用户。这就是一对一关系模型

- 一对多模型

  >   一对多：即表中的一条数据对应另一个表中的多条数据
  >
  >   例如：订单表和用户表，一个用户可以有多个订单。这就是多对多关系模型

- 多对多模型

  >   多对多模型：两个一对多的关系模型，通过中间表关联，形成多对多关系模型
  >
  >   例如：用户和角色，一个用户可以有多个角色，一个角色又可以有多个用户。这样就可以建立一个中间表，来管理这两个表的关系。




### 2..JOIN连接查询(多表查询)

> 连接查询：通过JOIN来连接一个或多个表进行查询，通过ON指定连接的条件。连接查询分为 内连接 和外连接
>
> *内连接*：表和表进行JOIN查询，没有主次之分，表与表是平等关系，*只有完全匹配连接条件的数据才会被查询出来进行连接*
>
> *外连接*：*将一张表作为主表, 主要是为了将这张表的数据全部查询出来*，捎带着关联查询左边的表。在外连接当中，两张表连接，产生了主次关系。简单来说,就是先查询主表的所有数据,再去关联查询次表

- **基本连接查询**（内连接）

  > 先确定一个表，然后通过 JOIN 确定要连接的表，最后通过 *ON<条件>*来通过条件连接表，只有完全匹配的数据才会被查询出来。

  - 语法:  select  <字段> from `<表1> join <表2> on <连接条件>`

  - 先确定表，仍然使用`FROM <表1>`的语法；

  - 再确定需要连接的表，使用`INNER JOIN <连接表>`的语法； INNER是可以省略的

  - 然后确定连接条件，使用`ON <条件...>`

  - 可选：加上`WHERE`子句、`ORDER BY`等子句。

  - 示例 :

    ```sql
    SELECT * FROM <表1> as s JOIN <表2> as c  ON <链接条件> <后面可以跟上筛选条件>
    ```

### 3.内连接查询

> 内连接特点：*表和表进行JOIN查询，没有主次之分，表与表是平等关系，只有完全匹配连接条件的数据才会被查询出来进行连接*
>
> 内连接又分为：等值连接  非等值连接 和自连接

- 等值连接
  - 连接条件是等量关系，所以被称为等值连接。
  - 只查询连接条件相等的数据进行连接，参考上面的基本连接查询
- 非等值连接
  - 表与表之间没有相同项（或有相同但是不能用），但是表之间某个或某些项直接存在着一定的关系。
- 自连接
  - 自连接就是表自身是主表,也是连接表,自身和自身连接查询       自连接，技巧：一张表看做两张表。

### 4.外连接查询

>   *将一张表作为主表, 主要是为了将这张表的数据全部查询出来*，捎带着关联查询左边的表。在外连接当中，两张表连接，产生了主次关系。简单来说,就是先查询主表的所有数据,再进行JOIN连接查询

- 右外连接（右连接）

  - 语法:  select <查询字段> from <连接表> right join <主表> on <连接条件>

  - 说明: `right join` 表示将右边的表作为主表,主表的所有数据都会被查询出来,再去关联查询副表

  - 示例 :     

    ```sql
    select * from emp right join dept on emp.DEPTNO = dept.DEPTNO;
    ```

- 左外连接（左连接）

  - 带有right的是右外连接，又叫做右连接。 右边是主表
  - 带有left的是左外连接，又叫做左连接。  左边是主表
  - 作用和语法一样: 
